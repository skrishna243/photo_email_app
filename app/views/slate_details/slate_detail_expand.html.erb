<div class="d-grid gap-2 d-md-flex justify-content-md-end">
  <%= link_to 'BACK',slates_path, class: 'btn btn-secondary'  %>
</div><br>	

<div class="card">
	<div class="card-header header-style">
		<h4><%= @slate_name.school_name %> Slate Details</h4>
	</div>
		<% unless @slate_detail_result.nil? || @slate_detail_result.empty? %>
			<div class = "card-body">
				<table id="slate_table" class="table table-bordered">
					<thead>
						<tr>
							<th>SPORT</th>
							<th>TEAM</th>
							<th>GENDER</th>
							<th>COACHES</th>
							<th>ATHLETES</th>
							<th>MANAGERS</th>
							<th>STARTING IMAGES</th>
							<th>END IMAGES</th>
							<th>TOTAL IMAGES</th>
							<th>NOTE</th>
							<th>Actions</th>
						</tr>
					</thead>
					<tbody>
						<% @slate_detail_result.each do |stu| %>
							<tr>
								<td><%= stu.sport_name  %></td>
								<td><%= slate_team_type(stu.team_type) %></td>
								<td><%= slate_gender_type(stu.gender_type)  %></td>
								<td><%= stu.coach_count %></td>
								<td><%= stu.atheletes_count  %></td>
								<td><%= stu.manager_count %></td>
								<td><%= stu.image_start  %></td>
								<td><%= stu.image_end %></td>
								<td><%= stu.total_count  %></td>
								<td><%= stu.note %></td>
								<td><%= button_tag('Edit'.html_safe, class: 'btn btn-default  btn-edit-slate-detail', 'data-slate-detail-id': stu.id, 'data-slate-id': stu.slate_id)%></td>
							</tr>
						<% end %>
					</tbody>
				</table>
			</div>
		<% else %>
			<div class = "card-body">
				<p>Currently there is no data to show.</p>
			</div>
		<% end %>
</div>

<div class="modal fade" id="slate_detail_modal_container" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header"><h4 class="modal-title m0">New Slate</h4></div>
      <div class="modal-body"></div>	    
    </div>
  </div>
</div>



<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/buttons/1.6.5/css/buttons.dataTables.min.css">
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.22/css/jquery.dataTables.min.css">
<script type="text/javascript" charset="utf8" src="https://code.jquery.com/jquery-3.5.1.js"> </script> 
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.js"> </script>
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/buttons/1.6.5/js/dataTables.buttons.min.js"> </script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/buttons/1.6.5/js/buttons.flash.min.js"> </script>
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/buttons/1.6.5/js/buttons.html5.min.js"> </script>
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/buttons/1.6.5/js/buttons.print.min.js"> </script>
<script type="text/javascript" src="https://cdn.datatables.net/searchpanes/1.2.1/js/dataTables.searchPanes.min.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/select/1.3.1/js/dataTables.select.min.js"></script>

<script type="text/javascript">
	setTimeout(function(){
    	$('.flash-panel').fadeOut();
    }, 3000);
	$(document).ready(function () { 
		$("#slate_table").DataTable({ 
				dom: 'frtip',
				 scrollX: true,

		});

		$(document).on('click','.btn-edit-slate-detail' , function() {
    	var slate_detail_id = $(this).data('slate-detail-id');
    	var slate_id = $(this).data('slate-id');
    	$.ajax({
        url: '/slates/'+ slate_id + '/slate_details/' + slate_detail_id + '/edit',
        data: {pag_exp: 'yes'},

        success: function(edit_school_modal) {
          $('#slate_detail_modal_container .modal-body').html(edit_school_modal);
          $('.modal').modal('hide');
          $('#slate_detail_modal_container').modal('show');
          $('#slate_detail_modal_container .modal-title').html('Edit Slate');
        }

      });

    });

	});
</script>