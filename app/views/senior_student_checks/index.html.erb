<div class="d-grid gap-2 d-md-flex justify-content-md-end">
  <%= link_to 'BACK',senior_student_report_reports_path, class: 'btn btn-secondary'  %>
</div><br>	
<div class="card">
	<div class="card-header header-style">
		<h4>CHECK IN/OUT STUDENT DATA</h4>
	</div>
  <% unless @senior_check_data.nil? || @senior_check_data.empty? %>
	<div class = "card-body">
		<div class="table-responsive">
			<div><h3 class="tool_bar"></h3></div>
			<table id="student_table" class="table table-bordered">
				<thead>
					<tr class="text-center">
						<th>Student ID</th>
						<th>Last Name</th>
						<th>First Name</th>
						<th>Email</th>
						<th>Online Code</th>
						<th>New Data Entry</th>
						<th>Session</th>
						<th>Check In Time</th>
						<th>Check Out Time</th>
					</tr>
				</thead>
				<tbody>
					<% @senior_check_data.each do |stu| %>
						<tr>
							<td><%= stu.subject_id %></td>
							<td><%= stu.last_name %></td>
							<td><%= stu.first_name %></td>
							<td><%= stu.email%></td>
							<td><%= stu.student_online_id%></td>
							<td><%= new_data_entry(stu.new_data).html_safe%></td>
							<td><%= session_type(stu.session_type)  %></td>
							<td><%= datetime_formatted(stu.created_at)%></td>
							<td><%= datetime_formatted(stu.updated_at)%></td>
						</tr>
					<% end %>
				</tbody>
			</table>
	<% else %>
		<div class = "card-body">
			<p>Currently there is no data to show.</p>
		</div>
	<% end %>
	</div>
	</div>
</div>


<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/buttons/1.6.5/css/buttons.dataTables.min.css">
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.22/css/jquery.dataTables.min.css">
<script type="text/javascript" charset="utf8" src="https://code.jquery.com/jquery-3.5.1.js"> </script> 
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.js"> </script>
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/buttons/1.6.5/js/dataTables.buttons.min.js"> </script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/buttons/1.6.5/js/buttons.flash.min.js"> </script>
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/buttons/1.6.5/js/buttons.html5.min.js"> </script>
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/buttons/1.6.5/js/buttons.print.min.js"> </script>
<script type="text/javascript" src="https://cdn.datatables.net/searchpanes/1.2.1/js/dataTables.searchPanes.min.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/select/1.3.1/js/dataTables.select.min.js"></script>

<script type="text/javascript">
	
	$(document).ready(function () {
		// $("#footer").removeClass("footer");
		$("#student_table").DataTable({
			dom: 'Bfrtip',
		    "initComplete": function () {
							var api = this.api();
							var dx_count = api.column(5).data().filter(function(value, index) { return value.includes('DX') ? true : false; }).length;
							var st_count = api.column(5).data().filter(function(value, index) { return value.includes('ST') ? true : false; }).length;
							var yb_count = api.column(5).data().filter(function(value, index) { return value.includes('YB') ? true : false; }).length;
							var rt_count = api.column(5).data().filter(function(value, index) { return value.includes('RT') ? true : false; }).length;
							var ug_count = api.column(5).data().filter(function(value, index) { return value.includes('UG') ? true : false; }).length;
							var ns_count = api.column(5).data().filter(function(value, index) { return value.includes('NS') ? true : false; }).length;
							var total_res = "Session Totals DX: " + dx_count + ", ST: " + st_count + ", YB: " + yb_count + ", RT: " + rt_count + ", UG: " + ug_count + ", NS: " + ns_count;
								return $('.tool_bar').html( total_res);
						},
			buttons:[
						{
						    	
						    extend: 'excel',
						    text: 'Export',
						    filename: 'Student_check_in_out_data',
						    title: function(){
								    	return $('.tool_bar').text()
								    },

						}
			  		],
		});
	});
</script>

